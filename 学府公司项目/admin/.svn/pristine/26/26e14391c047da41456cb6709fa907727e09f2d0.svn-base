<div class="col-md-12">
    <div class="col-md-12 row" style="padding-top: 10px">
        <div class="col-md-6 col-xs-12 row">
            <div class="col-md-4 col-xs-12">
                <div class="parentsitelist"></div>
            </div>
            <div class="col-md-4 col-xs-12" style="margin-left: 50px">
                <div class="endchild"></div>
            </div>
        </div>
        <div class="col-md-6 col-xs-12 row ">
            <div class="col-md-12 col-xs-12">
                <button class="btn btn-e btn-wd" onclick="deleteclass()">成果上传</button>
                <a class="btn btn-e btn-wd" href="">批量删除</a>
            </div>
        </div>
    </div>
    <div class="treetable"></div>
</div>
<div id="popups">

</div>
<script>
    (function (window) {
        var pagepostdata=apidata.postdata;
        var pagedata = utils_admin.setajax('POST', apidata.postdata, apidata.course.queryShowPage).data;
        pagedata.forEach((a, b) => {
            a.id = a.catId;
            a.one = a.catName;
            a.two = a.catId;
            a.three = a.catLevel;
            a.four = a.catSort;
            if (a.parentId) {
                a.child = false
            } else {
                a.child = true
            }
            a.menu = [
                {
                    "text": "编辑",
                    "method": "redactclass",
                },
                {
                    "text": "预览",
                    "method": "onedel",
                },
                {
                    "text": "删除",
                    "method": "onedel",
                }
            ]
        });
        console.log(pagedata);
        window.utils_admin.loadhtml($('.treetable'), '/treeTable.html', {
            "datath": [
                {
                    "text": "活动成果"
                },
                {
                    "text": "上传人"
                },
                {
                    "text": "上传人"
                },
                {
                    "text": "上传时间"
                },
                {
                    "text": "操作"
                }
            ],
            "tabledata": pagedata,
        });



        function beforeExpand(treeTable, id) {
            if ($('.'+id,treeTable).length) { return; }
            apidata.postdata.payload.parentId = id;
            let postdata = utils_admin.setajax('POST', apidata.postdata, apidata.course.queryShowPage).data;
            if (postdata) {
                let html = '';
                for (var i = 0; i < postdata.length; i++) {
                    postdata[i].childData?postdata[i].childData=true:postdata[i].childData=false;
                    console.log(postdata)
                    html+="<tr id=" + postdata[i].catId + " pId=" + postdata[i].parentId +" hasChild="+postdata[i].childData+">" +
                        "<td><input class='fuxk' name='choose' type='checkbox' value=" + id + "/></td>"+
                        "<td>"+postdata[i].catName+"</td>" +
                        "<td>"+postdata[i].catId+"</td>" +
                        "<td>"+postdata[i].catLevel+"</td>" +
                        "<td>"+postdata[i].catName+"</td>" +
                        "<td  class='text-center caozuo' style='color: #00bbff'>" +
                        "<a onclick='redactclass(this)' data-id="+postdata[i].catId+">编辑</a>" +
                        "<a onclick='onedel(this)' data-id="+postdata[i].catId+">删除</a>" +
                        "</td></tr>";
                }
                treeTable.addChilds(html);
            }
        }

    })(window)

</script>