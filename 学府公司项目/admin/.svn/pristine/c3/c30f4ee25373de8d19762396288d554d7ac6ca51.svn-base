<div class="card-body">
    <div class="tab-content">
        <div class="col-md-12">
            <div class="card horizontal-form">
                <div class="card-body">
                    <div class="row col-md-12">
                        <div class="col-md-4 col-sm-6 row">
                            <label class="col-md-4 control-label">题干</label>
                            <div class="col-md-8 rylist">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6 row">
                            <label class="col-md-4 control-label">知识点</label>
                            <div class="col-md-8 rylist">
                                <input type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-6">
                            <button style="margin-top: 5px" class="btn btn-wd btn-e">搜索</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="padding-l-10 f-s-17 bod  box-s bod-r-8 padding-t-10">
                <a class="btn btn-e btn-wd" href="#/addlibrary">添加题库</a>
            </div>
        </div>
        <div class="container-fluid padding-t-20">
            <div class="row">
                <div class="col-md-12 ">
                    <table class="table table-bordered table-hover" id="tablecz">
                        <thead>
                        <tr>
                            <th class="text-center cuti">试题编号</th>
                            <th class="text-center cuti">题干内容</th>
                            <th class="text-center cuti">题型</th>
                            <th class="text-center cuti">知识点</th>
                            <th class="text-center cuti">操作</th>
                        </tr>
                        </thead>

                        <tbody id="questiongerent"></tbody>


                    </table>
                    <div class="fenye">
                        <div class="pagination pagination0"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/html" id="questiongerent_t">
    {{each data}}
    <tr class="{{$value.qpId}}">
        <td class="text-center"> {{$value.qpId}}</td>
        <td class="text-center">{{$value.qpId}}</td>
        <td class="text-center">{{$value.name}}</td>
        <td class="text-center">{{$value.name}}</td>
        <td class="text-center caozuo">
            <a href="javascript:void(0);" data-id="{{$value.qpId}}"
               onclick="redact(this)">
                编辑
            </a>
            <a href="javascript:;" data-id="{{$value.qpId}}"
               onclick="gettopic(this)">查看题目</a>
            <a href="javascript:void(0);" data-id="{{$value.qpId}}"
               onclick="onedel(this)">删除</a>

        </td>
    </tr>
    {{/each}}
</script>


<script>
    (function (window, $) {

        let pagepostdata = utils_admin.clone(apidata.postdata);
        let pagedataone = utils_admin.setajax('POST', pagepostdata, apidata.testing.queryPageOne);
        utils_admin.queryPage("questiongerent", "questiongerent_t", pagedataone);
        //分页1
        new pagination({
            pagination: $('.pagination0'),//分页挂载的样式名称
            maxPage: 5, //最大页码数,支持奇数，左右对称
            startPage: 1,    //默认第一页
            currentPage: 1,          //当前页码
            totalPageCount: (pagedataone.totalCount / pagedataone.pageSize) - (pagedataone.totalCount / pagedataone.pageSize) % 1 + 1,  //总页数
            callback: function (pageNum) {
                pagepostdata.payload.page = "" + pageNum + "";
                utils_admin.queryPage("questiongerent", "questiongerent_t", utils_admin.setajax('POST', pagepostdata, apidata.testing.queryPageOne));
            }
        });

        //删除
        function onedel(e) {
            $("#popups").toggle("hidden");
            var id = e.dataset.id;
            pagepostdata.payload.qpId = id;
        }

        //查看题目
        function gettopic(e) {
            utils_admin.redact("topic", "qpId", e)
        }

        //编辑题库
        function redact(e) {
            utils_admin.redact("addlibrary", "qpId", e)
        }

        $("#popups>.white_content").click(function (a) {
            if (a.target.nodeName.toLowerCase() == "button") {
                $("#popups").toggle("hidden")
            }
            if (a.target.dataset.id == "1") {
                utils_admin.setajax('POST', pagepostdata, apidata.resource.rdeleteById);
                utils_admin.queryPage("questiongerent", "questiongerent_t", utils_admin.setajax('POST', pagepostdata, apidata.testing.queryPageOne));
            }
        });
        window.gettopic = gettopic;
        window.redact = redact;
        window.onedel = onedel
    })(window, window.$);


</script>