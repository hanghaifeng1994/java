<!--新闻资讯列表使用-->
<div>
    <div class="card-body">
        <ul role="tablist" class="nav nav-tabs col-md-12">
            <!--修改或者注释-->
            <li role="presentation" class="nav-item show active col-md-4">
                <a class="nav-link" id="info-tab" href="#agency" data-toggle="tab" data-hide="agency"
                   onclick="agencyTabChange(this)">管理资讯</a>
            </li>
            <!--修改或者注释-->
            <li class="nav-item col-md-4">
                <a class="nav-link" id="account-tab" href="#company" data-toggle="tab" data-hide="company"
                   onclick="companyTabChange(this)">主站下发资讯</a>
            </li>
            <!--<li class="nav-item col-md-4">-->
            <!--<a class="nav-link" id="capture-tab" href="#capture" data-toggle="tab">抓取记录</a>-->
            <!--</li>-->
        </ul>
        <div class="tab-content">
            <!--管理的资讯-->
            <div id="agency" class="tab-pane fade show active" role="tabpanel" aria-labelledby="info-tab">
                <!--平台和站点条件区-->
                <div class="col-md-12 row" style="margin-left: 1px;margin-bottom: 10px">
                    <div class="parentsitelist"></div>
                    <div class="endchild" style="margin-left: 5px"></div>
                </div>
                <!--搜索区-->
                <div class="col-md-12">
                    <div class="card horizontal-form">
                        <div class="card-body">
                            <div class="row col-md-12">
                                <div class="col-md-3 col-sm-8 row">
                                    <label class="col-md-6 control-label">一级栏目</label>
                                    <div class="col-md-6 rylist">
                                        <div class="newscategoryone"></div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6 row" style="margin-left: 20px">
                                    <label class="col-md-6 control-label">二级栏目</label>
                                    <div class="col-md-6 rylist">
                                        <div class="newscategorytwo"></div>
                                    </div>
                                </div>
                            </div>
                            <!--修改搜索条件开始-->
                            <div class="row col-md-12">
                                <div class="col-md-6 col-sm-6 row">
                                    <ul class=" list-unstyled list-inline antime1 rylist row">
                                        <li class="fdong brokeragetime timecolor"
                                            style="width: 14% ;margin-left:33px;margin-right: 10px;">
                                            发布日期
                                        </li>
                                        <li class="" style="width: 25%">
                                            <input type="text" id="datetimepicker1" class="form-control datepicker"
                                                   placeholder="选择日期"/>
                                        </li>

                                        <li class="fdong timecolor" style="width:5%;">到</li>
                                        <li class="" style="width: 25%">
                                            <input type="text" class="form-control datepicker" placeholder="选择日期"/>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-6 col-sm-6 row">
                                    <div class="col-md-6 col-sm-6 row " style="margin-left: 10px">
                                        <label class="col-md-6 control-label">审核状态</label>
                                        <div class="col-md-6 rylist">
                                            <div class="statusstate"></div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6 row" style="margin-left: 20px">
                                        <label class="col-md-6 control-label">置顶状态</label>
                                        <div class="col-md-6 rylist">
                                            <div class="stickstate"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row col-md-12">
                                <div class="col-md-4 col-sm-6">
                                    <div class="row">
                                        <label class="col-md-4 control-label" style="text-align: center">标题</label>
                                        <div class="col-md-7 rylist">
                                            <input type="text" name="title" class="form-control width-150">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6">
                                    <button style="margin-top: 10px" class="btn btn-wd btn-e" onclick="seek(agency)">
                                        搜索
                                    </button>
                                </div>
                            </div>
                            <!--修改搜索条件开始-->
                        </div>
                    </div>
                </div>
                <!--批量操作和新增区域-->
                <div class="col-md-12">
                    <div class="padding-l-10 f-s-17 bod  box-s bod-r-8 padding-t-10">
                       <!-- <button class="btn btn-e btn-wd">批量推送</button>-->
                        <a class="btn btn-e btn-wd" href="#/addmessagegerent" style="float:right; margin-right: 10px;">添加资讯</a><!--改名字-->
                        <button class="btn btn-f btn-wd" onclick="deleteclass()">批量删除</button>
                    </div>
                </div>
                <!--表格数据区-->
                <div class="container-fluid padding-t-20">
                    <div class="row">
                        <div class="col-md-12 ">
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th><input class="fuxk" name="allcheck2" type="checkbox" value="" id="allcheck2" onclick="selectall(this)"/></th>
                                    <!--改第一个tab表格抬头开始-->
                                    <th class="text-center cuti">标题</th>
                                    <th class="text-center cuti">所属栏目</th>
                                    <th class="text-center cuti">是否推荐/置顶</th>
                                    <th class="text-center cuti">审核状态</th>
                                    <th class="text-center cuti">发布状态</th>
                                    <th class="text-center cuti">操作</th>
                                    <!--改第一个tab表格抬头结束-->
                                </tr>
                                </thead>
                                <tbody id="queryPage"></tbody>
                            </table>
                            <div class="fenye">
                                <div class="pagination pagination0"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--主站下发资讯-->
            <div id="company" class="tab-pane fade" role="tabpanel" aria-labelledby="account-tab">
                <div class="col-md-12 row" style="margin-left: 6px;margin-bottom: 10px">
                    <div class="dropdowns"></div>
                    <div class="dropdowns" style="margin-left: 5px"></div>
                </div>
                <!--搜索区-->
                <div class="col-md-12">
                    <div class="card horizontal-form">
                        <div class="card-body">
                            <!--
                            <div class="row col-md-12">
                                <div class="col-md-6 col-sm-6 row">
                                    <label class="col-md-4  control-label"> 主站：终身网主站</label>
                                    <div class="col-md-6 rylist">
                                        <div class="dropdowns"></div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6 row">
                                    <label class="col-md-5 control-label">一级栏目</label>
                                    <div class="col-md-6 rylist">
                                        <div class="companynewscateone"></div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6 row">
                                    <label class="col-md-6 control-label">二级栏目</label>
                                    <div class="col-md-6 rylist">
                                        <div class="companynewscatetwo"></div>
                                    </div>
                                </div>
                            </div>
                            -->
                            <!--改第二个tab搜索条件开始-->
                            <div class="row col-md-12">
                                <div class="col-md-6 col-sm-6 row">
                                    <ul class=" list-unstyled list-inline antime1 rylist row">
                                        <li class="fdong brokeragetime timecolor"
                                            style="width: 11% ;margin-left:39px;margin-right: 10px;">
                                            发布日期
                                        </li>
                                        <li class="" style="width: 35%">
                                            <input type="text" name="datastart" class="form-control datepicker"
                                                   placeholder="选择日期"/>
                                        </li>
                                        <li class="fdong timecolor" style="width:5%;">到</li>
                                        <li class="" style="width: 35%">
                                            <input type="text" name="dataend" class="form-control datepicker"
                                                   placeholder="选择日期"/>
                                        </li>
                                    </ul>
                                </div>
                                <div class=" col-md-3 col-sm-6 row">
                                    <div class="row rylist">
                                        <label class="col-md-4 control-label rylist">标题</label>
                                        <div class="col-md-7">
                                            <input type="text" name="title" class="form-control">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3 col-sm-6 row">
                                    <!--
                                    <div class="col-md-6 rylist">
                                        <div class="all"></div>
                                    </div>
                                    -->
                                    <div class="col-md-6 rylist">
                                        <button class="btn btn-e" style="margin-left: 40px;height: 35px"
                                                onclick="seek(company)">搜索
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!--改第二个tab搜索条件开始-->
                        </div>
                    </div>
                </div>
                <!--批量操作和新增区域
                <div class="col-md-12">
                    <div class="padding-l-10 f-s-17 bod  box-s bod-r-8 padding-t-10">
                        <button class="btn btn-e btn-wd">批量抓取</button>
                    </div>
                </div>
                -->
                <!--表格数据区-->
                <div class="container-fluid padding-t-20">
                    <div class="row">
                        <div class="col-md-12 ">
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <!--
                                    <th><input class="fuxk" name="allcheck3" type="checkbox" value="" id="allcheck3"
                                               onclick="selectall(this)"/></th>
                                               -->
                                    <!--改第二个tab表格抬头开始-->
                                    <th class="text-center cuti">标题</th>
                                    <th class="text-center cuti">所属栏目</th>
                                    <th class="text-center cuti">是否推荐/置顶</th>
                                    <th class="text-center cuti">发布日期</th>
                                    <th class="text-center cuti">主站点</th>
                                    <!--改第二个tab表格抬头结束-->
                                </tr>
                                </thead>
                                <tbody id="lowerSendPage">

                                </tbody>
                            </table>
                            <div class="fenye">
                                <div class="pagination pagination1"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--子站资讯-->
            <div id="capture" class="tab-pane fade" role="tabpanel" aria-labelledby="account-tab">
                <!--<div class="col-md-12 row" style="margin-left: 6px;margin-bottom: 10px">-->
                <!--<div class="dropdowns"></div>-->
                <!--<div class="dropdowns" style="margin-left: 5px"></div>-->
                <!--</div>-->
                <!--<div class="col-md-12">-->
                <!--<div class="card horizontal-form">-->
                <!--<div class="card-body">-->
                <!--<div class="row col-md-12">-->
                <!--<div class="col-md-6 col-sm-6 row">-->
                <!--<label class="col-md-4  control-label"> 主站：终身网主站</label>-->
                <!--<div class="col-md-6 rylist">-->
                <!--<div class="dropdowns"></div>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="col-md-3 col-sm-6 row">-->
                <!--<label class="col-md-5 control-label">一级栏目</label>-->
                <!--<div class="col-md-6 rylist">-->
                <!--<div class="dropdowns"></div>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="col-md-3 col-sm-6 row">-->
                <!--<label class="col-md-6 control-label">二级栏目</label>-->
                <!--<div class="col-md-6 rylist">-->
                <!--<div class="dropdowns"></div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="row col-md-12">-->
                <!--<div class="col-md-6 col-sm-6 row">-->
                <!--<ul class=" list-unstyled list-inline antime1 rylist row">-->
                <!--<li class="fdong brokeragetime timecolor"-->
                <!--style="width: 11% ;margin-left:48px;margin-right: 10px;">-->
                <!--发布日期-->
                <!--</li>-->
                <!--<li class="" style="width: 35%">-->
                <!--<input type="text" class="form-control datepicker" placeholder="选择日期"/>-->
                <!--</li>-->
                <!--<li class="fdong timecolor" style="width:5%;">到</li>-->
                <!--<li class="" style="width: 35%">-->
                <!--<input type="text" class="form-control datepicker" placeholder="选择日期"/>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</div>-->
                <!--<div class=" col-md-4 col-sm-6 row">-->
                <!--<div class="row rylist">-->
                <!--<label class="col-md-4 control-label rylist">标题</label>-->
                <!--<div class="col-md-7">-->
                <!--<input type="text" class="form-control">-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->

                <!--<div class="col-md-3 col-sm-6 row">-->
                <!--<div class="col-md-6 rylist">-->
                <!--<button class="btn btn-e" style="margin-left: 40px;height: 35px">搜索记录</button>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="col-md-12">-->
                <!--<div class="padding-l-10 f-s-17 bod  box-s bod-r-8 padding-t-10">-->
                <!--<button class="btn btn-f btn-wd">批量删除</button>-->
                <!--</div>-->
                <!--</div>-->
                <!--<div class="container-fluid padding-t-20">-->
                <!--<div class="row">-->
                <!--<div class="col-md-12 ">-->
                <!--<table class="table table-bordered table-hover">-->
                <!--<thead>-->
                <!--<tr>-->
                <!--<th><input class="fuxk" name="allcheck1" type="checkbox" value="" id="allcheck1"-->
                <!--onclick="selectall()"/></th>-->
                <!--<th class="text-center cuti">标题</th>-->
                <!--<th class="text-center cuti">所属栏目</th>-->
                <!--<th class="text-center cuti">抓取日期</th>-->
                <!--<th class="text-center cuti">抓取人</th>-->
                <!--<th class="text-center cuti">操作</th>-->
                <!--</tr>-->
                <!--</thead>-->
                <!--<tbody>-->
                <!--{{each queryPage.data}}-->
                <!--<tr>-->
                <!--<td><input class="fuxk" name="choose" type="checkbox" value=""/></td>-->
                <!--<td class="text-center">{{$value.articleId}}</td>-->
                <!--<td class="text-center">{{$value.createBy}}</td>-->
                <!--<td class="text-center">-->
                <!--{{$value.createBy}}<span style="padding:0 5px">/</span>{{$value.createBy}}-->
                <!--</td>-->
                <!--<td class="text-center">{{$value.createBy}}</td>-->
                <!--<td class="text-center caozuo">-->
                <!--<a href="javascript:void(0);">取消发布</a>-->
                <!--<a href="javascript:void(0);">推荐</a>-->
                <!--<a href="javascript:void(0);">置顶</a>-->
                <!--<a href="javascript:void(0);" onclick="onedel()">删除</a>-->
                <!--</td>-->
                <!--</tr>-->
                <!--{{/each}}-->
                <!--</tbody>-->
                <!--</table>-->
                <!--<div class="fenye">-->
                <!--<div class="sxy"><a href="javascript:void(0)">首页</a></div>-->
                <!--<div class="sxy"><a href="javascript:void(0)">上一页</a></div>-->
                <!--<div class="xuhao fyon"><a href="javascript:void(0)">1</a></div>-->
                <!--<div class="xuhao"><a href="javascript:void(0)">2</a></div>-->
                <!--<div class="xuhao">…</div>-->
                <!--<div class="xuhao"><a href="javascript:void(0)">5</a></div>-->
                <!--<div class="sxy"><a href="javascript:void(0)">下一页</a></div>-->
                <!--<div class="sxy"><a href="javascript:void(0)">尾页</a></div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
                <!--</div>-->
            </div>
        </div>
        <div id="popups"></div>
    </div>
</div>
<!--第一个tab表格数据模板区-->
<script type="text/html" id="queryPage_t">
    {{each data}}
    <tr class="{{$value.articleId}}">
        <td><input class="fuxk" name="choose" type="checkbox" value="{{$value.articleId}}"/>
        </td>
        <!--改第一个tab表格抬头对应数据开始-->
        <td class="text-center"> {{$value.title}}</td>
        <td class="text-center">{{$value.createBy}}</td>
        <td class="text-center">
           <span data-pubStatus="{{$value.articleId}}">
                {{if $value.posid=="1"}}是{{else}}否{{/if}}
           </span>
            /
            <span data-weight="{{$value.articleId}}">
                {{if $value.weight=="999"}}是 {{else}}否 {{/if}}
            </span>
        </td>
        <td class="text-center" data-status="{{$value.status}}">
            {{if $value.status==0}}未提交
            {{else if $value.status==1}}审核中
            {{else if $value.status==2}}审核通过
            {{else if $value.status==2}}审核失败
            {{/if}}
        </td>
        <td class="text-center" data-status="{{$value.pubStatus}}">
            {{if $value.pubStatus==0}}未发布
            {{else if $value.pubStatus==1}}发布
            {{/if}}
        </td>
        <!--改第一个tab表格抬头对应数据结束-->
        <!--单行操作区-根据具体页面选择对应按钮修，不需要的注释-->
        <td class="text-center caozuo">
            <a href="javascript:void(0);" data-id="{{$value.articleId}}"
               onclick="pubStatus(this)">
                {{if $value.pubStatus=="0"}}发布
                {{else}}取消发布
                {{/if}}</a>
            <a href="javascript:void(0);" data-id="{{$value.articleId}}"
               onclick="posid(this)">
                {{if $value.posid=="1"}}取消推荐
                {{else}}推荐
                {{/if}}
            </a>
            <a href="javascript:void(0);" data-id="{{$value.articleId}}"
               onclick="weight(this)">
                {{if $value.weight!="999"}}置顶
                {{else}}取消置顶
                {{/if}}
            </a>
            <a href="javascript:void(0);" data-id="{{$value.articleId}}"
               onclick="onedel(this)">删除</a>
        </td>
    </tr>
    {{/each}}
</script>
<!--第二个tab表格数据模板区-->
<script type="text/html" id="lowerSendPage_t">
    {{each data}}
    <tr class="{{$value.articleId}}">
        <!--
        <td><input class="fuxk" name="choose" type="checkbox"
                   value="{{$value.articleId}}"/></td>
                   -->
        <!--改第二个tab表格抬头对应数据开始-->
        <td class="text-center"> {{$value.title}}</td>
        <td class="text-center">{{$value.createBy}}</td>
        <td class="text-center">
           <span data-pubStatus="{{$value.articleId}}">
                {{if $value.posid=="1"}}是{{else}}否{{/if}}
           </span>
            /
            <span data-weight="{{$value.articleId}}">
                {{if $value.weight=="999"}}是 {{else}}否 {{/if}}
            </span>
        </td>
        <td class="text-center" data-status="{{$value.updateDate}}">
            {{$value.updateDate}}
        </td>
        <td class="text-center" data-status="{{$value.siteId}}">
            {{$value.siteId}}
        </td>
        <!--改第二个tab表格抬头对应数据结束->
    </tr>
    {{/each}}
</script>

<script>
    //cope开始
    //初始化
    (function (window, $) {
        window.utils_admin.calendar($('.datepicker'));
        //站点,平台初始化
        let childSiteList = [], parentSiteList = [];
        //取得管理员可管理站点列表即查询员工平台站点列表
        let siteslist = utils_admin.setajax('POST', apidata.postdata, apidata.base.staffPtSitesList);
        siteslist.data.forEach((a, index) => {
            parentSiteList.push(a);
            childSiteList.push(a.siteList);
            parentSiteList[index].text = parentSiteList[index].ptName
            parentSiteList[index].id = parentSiteList[index].ptId;
        });
        window.utils_admin.loadhtml($(".parentsitelist"), '/dropdown.html', {
            "header": "所有平台",
            "id": null,
            "body": parentSiteList,
            "width": 120,
            "name": "parentsitelist",
        });
        window.utils_admin.loadhtml($(".endchild"), '/dropdown.html', {
            "header": "先选择平台",
            "id": null,
            "body": null,
            "width": 120,
            "name": "endchild",
        });
        //换站点
        $(".parentsitelist").click(function (a) {
            let id = '', endchild = [];
            if (a.target.nodeName.toLowerCase() == "li") {
                id = a.target.getAttribute("id")
            } else {
                id = parentSiteList[0].id
            }
            childSiteList.forEach((a) => {
                a.forEach((e, index) => {
                    if (e.ptId == id) {
                        endchild.push(e)
                        endchild[index].text = endchild[index].siteName;
                        endchild[index].id = endchild[index].siteId;
                    }
                })
            });
            window.utils_admin.loadhtml($(".endchild"), '/dropdown.html', {
                "header": endchild[0].text,
                "id": endchild[0].id,
                "body": endchild,
                "width": 120,
                "name": "endchild",
            });
        });
        //栏目一初始化-修改不同页面的具体分类接口- apidata.news.newsCategoryqueryPage)
        let newscategoryone = utils_admin.setajax('POST', apidata.postdata, apidata.news.newsCategoryqueryPage);
        console.log("newscategoryone--",newscategoryone)
        let newscategoryonearr = [];
        newscategoryone.data.forEach((a) => {
            a.text = a.catName;
            a.id = a.catId
            newscategoryonearr.push(a)
        });
        window.utils_admin.loadhtml($(".newscategoryone"), '/dropdown.html', {
            "header": "栏目一",
            "id": null,
            "body": newscategoryonearr,
            "width": 135,
            "name": "newscategoryonearr",
        });
        //换栏目
        $(".newscategoryone").click(function (a) {
            let id = '', endchild = [];
            if (a.target.nodeName.toLowerCase() == "li") {
                id = a.target.getAttribute("id")
            } else {
                id = parentSiteList[0].id
            }
            apidata.postdata.payload.parentId = id;
            //修改不同页面的具体分类接口
            let newscategorytwo = utils_admin.setajax('POST', apidata.postdata, apidata.news.newsCategoryqueryPage);
            console.log(newscategorytwo)
            if(newscategorytwo.data){
                newscategorytwo.data.forEach((a) => {
                    endchild.push(a)
                    endchild[index].text = endchild[index].siteName;
                    endchild[index].id = endchild[index].catId;
                })
            }else {
                endchild[0].text="空"
            }
            window.utils_admin.loadhtml($(".newscategorytwo"), '/dropdown.html', {
                "header": endchild[0].text,
                "id": endchild[0].id,
                "body": endchild,
                "width": 120,
                "name": "newscategorytwo",
            });
        })
        window.utils_admin.loadhtml($(".newscategorytwo"), '/dropdown.html', {
            "header": "栏目二",
            "id": null,
            "body": null,
            "width": 120,
            "name": "newscategorytwo",
        });
        //如果没有此搜索条件，即可删除
        window.utils_admin.loadhtml($(".statusstate"), '/dropdown.html', {
            "header": "所有",
            "id": null,
            "body": [
                {
                    "text":"未提交",
                    "id":"1"
                },
                {
                    "text":"提交",
                    "id":"2"
                },
            ],
            "width": 120,
            "name": "statusstate",
        });
        //如果没有此搜索条件，即可删除
        window.utils_admin.loadhtml($(".stickstate"), '/dropdown.html', {
            "header": "所有",
            "id": null,
            "body": [
                {
                    "text":"置顶",
                    "id":"1"
                },
                {
                    "text":"未置顶",
                    "id":"2"
                },
            ],
            "width": 120,
            "name": "stickstate",
        });

        //列表1  修改查询接口-apidata.news.queryPage
        let pagedataone = utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage);
        utils_admin.queryPage("queryPage", "queryPage_t", pagedataone);
        //分页1
        new pagination({
            pagination: $('.pagination0'),//分页挂载的样式名称
            maxPage: 5, //最大页码数,支持奇数，左右对称
            startPage: 1,    //默认第一页
            currentPage: 1,          //当前页码
            totalPageCount: pagedataone.pageSize,  //总页数
            callback: function (pageNum) {
                apidata.postdata.payload.page = "" + pageNum + "";
                //修改查询接口-apidata.news.queryPage
                utils_admin.queryPage("queryPage", "queryPage_t", utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage));
            }
        });

        //列表2
        //获取分页数据
        //修改第二个查询接口-apidata.news.lowerSendPage
        let pagedatatwo = utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage);
        //渲染模板，并填充挂载点
        utils_admin.queryPage("lowerSendPage", "lowerSendPage_t", pagedatatwo);
        //分页2
        new pagination({
            pagination: $('.pagination1'),
            maxPage: 5, //最大页码数,支持奇数，左右对称
            startPage: 1,    //默认第一页
            currentPage: 1,          //当前页码
            totalPageCount: pagedatatwo.pageSize,        //总页数
            callback: function (pageNum) {
                apidata.postdata.payload.page = "" + pageNum + "";
                //修改第二个查询接口-apidata.news.lowerSendPage
                utils_admin.queryPage("lowerSendPage", "lowerSendPage_t", utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage));
            }
        });

        //主站下发资讯的栏目-不用考虑
        window.utils_admin.loadhtml($(".companynewscateone"), '/dropdown.html', {
            "heard": "栏目一",
            "id": null,
            "body": [
                {
                    "text":"置顶",
                    "id":"1"
                },
                {
                    "text":"未置顶",
                    "id":"2"
                },
            ],
            "width": 120,
            "name": "stickstate",
        });
        //主站下发资讯的审核状态-不用考虑
        window.utils_admin.loadhtml($(".companynewscatetwo"), '/dropdown.html', {
            "heard": "栏目二",
            "id": null,
            "body": [
                {
                    "text":"置顶",
                    "id":"1"
                },
                {
                    "text":"未置顶",
                    "id":"2"
                },
            ],
            "width": 120,
            "name": "stickstate",
        });
        //主站下发资讯的审核状态-不用考虑
        window.utils_admin.loadhtml($(".all"), '/dropdown.html', {
            "heard": "全部",
            "id": "0",
            "body": [
                {
                    "text":"未抓取",
                    "id":"1"
                },
                {
                    "text":"已抓取",
                    "id":"2"
                },
            ],
            "width": 120,
            "name": "stickstate",
        });
    })(window, window.$);

    //cope结束

    //显示隐藏
    function agencyTabChange(that) {
        $("#" + that.getAttribute("data-hide") + "").siblings().hide()
        $("#" + that.getAttribute("data-hide") + "").show()
    }

    function companyTabChange(that) {
        $("#" + that.getAttribute("data-hide") + "").siblings().hide()
        $("#" + that.getAttribute("data-hide") + "").show()
    }

    //搜索
    function seek(e) {
        console.log("e-",e)
        let inputs = $(e).find("input");
        let title = '', status = 0, pubStatus = 0, weight = 0, posid = '';
        for (let i = 0; i < inputs.length; i++) {
            console.log(i+"--"+inputs[i].name)
            if (inputs[i].className == 'fuxk') {
                continue;
            }
            if (inputs[i].name == 'title') {
                console.log(inputs[i].value)
                title = inputs[i].value;
                console.log("title---",title)
            }else if (inputs[i].name == 'title') {
                console.log(inputs[i].value)
                title = inputs[i].value;
                console.log("title---",title)
            }
        }
        apidata.postdata.payload['title'] = title;
        //修改第一个和第二个查询接口-apidata.news.lowerSendPage
        if(e=='agency')
            utils_admin.queryPage("queryPage", "queryPage_t", utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage));
        else
            utils_admin.queryPage("lowerSendPage", "lowerSendPage_t", utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage));
    }

    //第一个tab表格的发布和取消发布
    function pubStatus(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            thit.innerText = "发布";
            $("." + id + "").children("td").get(5).innerText = "取消发布";
            apidata.postdata.payload.pubStatus = "0";
        } else {
            apidata.postdata.payload.pubStatus = "1";
            thit.innerText = "取消发布";
            $("." + id + "").children("td").get(5).innerText = "发布"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        //修改发布接口
        utils_admin.setajax('POST', apidata.postdata, apidata.news.publish);
    }

    //第一个tab表格的置顶和取消置顶
    function weight(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            apidata.postdata.payload.weight = "0";
            apidata.postdata.payload.status = "1";
            $($("." + id + "").children("td").get(3)).children("span").get(1).innerText = "否";
            thit.innerText = "置顶"
        } else {
            $($("." + id + "").children("td").get(3)).children("span").get(1).innerText = "是";
            apidata.postdata.payload.weight = "999";
            apidata.postdata.payload.status = "0";
            thit.innerText = "取消置顶"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        console.log("top---",apidata.postdata);
        ////修改置顶接口
        utils_admin.setajax('POST', apidata.postdata, apidata.news.top);
    }

    //第一个tab表格的推荐
    function posid(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            $($("." + id + "").children("td").get(3)).children("span").get(0).innerText = "否";
            apidata.postdata.payload.posid = "1";
            apidata.postdata.payload.flag = "1";
            thit.innerText = "推荐"
        } else {
            $($("." + id + "").children("td").get(3)).children("span").get(0).innerText = "是";
            apidata.postdata.payload.posid = "1";
            apidata.postdata.payload.flag = "0";
            thit.innerText = "取消推荐"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        ////修改推荐接口
        utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage);
    }


    //第二个tab表格的取消发布2-不考虑
    function pubStatus1(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            thit.innerText = "发布";
            $("." + id + "").children("td").get(4).innerText = "取消发布";
            apidata.postdata.payload.pubStatus = "0";
        } else {
            apidata.postdata.payload.pubStatus = "1";
            thit.innerText = "取消发布";
            $("." + id + "").children("td").get(4).innerText = "发布"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage);
    }

    //第二个tab置顶和取消置顶操作2---保留不用处理
    function weight1(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            apidata.postdata.payload.weight = "0";
            $($("." + id + "").children("td").get(3)).children("span").get(0).innerText = "否";
            thit.innerText = "置顶"
        } else {
            $($("." + id + "").children("td").get(3)).children("span").get(1).innerText = "是";
            apidata.postdata.payload.weight = "999";
            thit.innerText = "取消置顶"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage);
    }

    //第二个tab置顶和取消推荐操作2---保留不用处理
    function posid1(thit) {
        let id = thit.dataset.id;
        if (thit.innerText.length > 3) {
            $($("." + id + "").children("td").get(3)).children("span").get(0).innerText = "否";
            apidata.postdata.payload.posid = "0";
            thit.innerText = "推荐"
        } else {
            $($("." + id + "").children("td").get(3)).children("span").get(0).innerText = "是";
            apidata.postdata.payload.posid = "1";
            thit.innerText = "取消推荐"
        }
        apidata.postdata.payload.articleId = "" + id + "";
        utils_admin.setajax('POST', apidata.postdata, apidata.news.lowerSendPage);
    }
    //全选和取消全选-不用修改
    function selectall(thit) {
        let checkboxs = document.getElementsByName("choose");
        if (thit.checked) {
            for (let i = 0; i < checkboxs.length; i++) {
                let e = checkboxs[i];
                e.checked = "true";
            }
        } else {
            for (let i = 0; i < checkboxs.length; i++) {
                let e = checkboxs[i];
                e.checked = false;
            }
        }
    }

    //加载弹窗组件-不用修改
    function popups(data) {
        $("#popups").load('./template/popups.html', function (a) {
            $("#popups").html(window.template.render(a, data));
        })
    }

    //单独删除层-不用修改
    var daleteid = '';
    function onedel(e) {
        daleteid = e.dataset.id;
        let data = {
            "tempid": 'tableclassone',
            "checkdata": daleteid,
            "body": {
                "head": "提示",
                "text": "是否确认删除",
                "yesbt": "确认",
                "nobt": "取消"
            }
        };
        $("#popups").css({
            "display": "block"
        });
        data.checkdata = e.id;
        popups(data)
    }
    //单条删除方法，修改删除参数名称和接口名称
    function tableclassone(e) {
        apidata.postdata.payload.articleId = "" + daleteid + ""
        utils_admin.setajax('POST', apidata.postdata, apidata.news.delete);
        console.log($("." + daleteid))
        $("." + daleteid).remove();
        $("#popups").css({
            "display": "none"
        });
    }
    //隐藏提示层-不用修改
    function ballblack() {
        $("#popups").css({
            "display": "none"
        });
    }

    //批量删除层-不用修改
    function deleteclass() {
        let checkboxs = $("input[name=choose]");
        let data = {
            "tempid": 'balldeleteclass',
            "checkdata": [],
            "body": {
                "head": "提示",
                "text": "是否确认删除选中的内容",
                "yesbt": "确认",
                "nobt": "取消"
            }
        };
        for (let i = 0; i < checkboxs.length; i++) {
            if (checkboxs[i].checked) {
                data.checkdata.push(checkboxs[i].value);
            }
        }
        if (data.checkdata.length) {
            $("#popups").css({
                "display": "block"
            });
            popups(data);
        }
    }

    //批量删除方法，修改删除参数名称和接口名称
    function balldeleteclass(e) {
        let dalarticle = '';
        $("#popups").css({
            "display": "none"
        });
        for (let i = 0; i < e.length; i++) {
            dalarticle += e[i] + ","
            $("." + e[i]).remove();
        }
        apidata.postdata.payload.articleId = "" + dalarticle + ""
        utils_admin.setajax('POST', apidata.postdata, apidata.news.delete);
        if ($("#queryPage").children("tr").length < 1) {
            apidata.postdata.payload.page = "1";
            queryPage(utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage));
        }
        if ($("#lowerSendPage").children("tr").length < 1) {
            apidata.postdata.payload.page = "1";
            lowerSendPage(utils_admin.setajax('POST', apidata.postdata, apidata.news.queryPage));
        }
    }
</script>
